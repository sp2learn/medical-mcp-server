{% extends "base.html" %}

{% block content %}
<div class="header">
    <h1>🏥 Medical Query Assistant</h1>
    <div class="user-info">
        <span>Welcome, <strong>{{ current_user }}</strong></span>
        <a href="/logout">Logout</a>
    </div>
</div>

<div class="disclaimer">
    <strong>⚠️ Disclaimer:</strong> This tool provides medical information for professional reference only. The data was
    last synchronized on {{ current_time }}.
    <small style="float: right;">
        <a href="javascript:void(0)" onclick="window.medicalApp.refreshTimestamp()"
            style="color: #856404; text-decoration: none;" title="Refresh timestamp">🔄</a>
    </small>
    <br>
    This information is not a substitute for a healthcare professional's independent clinical judgment, diagnosis, or
    treatment.""

</div>

<!-- Intelligent Medical Assistant -->
<div class="container">
    <h2>🤖 Intelligent Medical Assistant</h2>
    <p style="color: #666; margin-bottom: 20px;">
        Ask me anything about medical conditions, patient data, or health information.
        I can access patient records and provide comprehensive medical insights.
    </p>

    <div class="form-group">
        <label for="medical_query">Your Medical Query:</label>
        <textarea id="medical_query" rows="4" placeholder="Examples:
• What is Ben's sleep summary for the past week?
• Show me Ben's latest blood pressure readings
• What are the symptoms of diabetes?
• Analyze Ben's vital signs trends
• What medications is Sarah taking?"></textarea>
    </div>

    <button onclick="processIntelligentQuery()" style="background: #28a745; font-size: 16px; padding: 15px 30px;">
        🔍 Ask Medical Assistant
    </button>

    <div class="loading" id="loading_main">Processing your medical query...</div>
    <div class="response" id="response_main" style="display:none;"></div>
</div>

<!-- Quick Examples -->
<div class="container" style="background: #f8f9fa;">
    <h3>💡 Quick Examples</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 10px;">
        <button class="example-btn" onclick="fillExample('What is Ben\\'s sleep summary?')">
            😴 Ben's Sleep Summary
        </button>
        <button class="example-btn" onclick="fillExample('Show Ben\\'s blood pressure trends')">
            🩺 Ben's BP Trends
        </button>
        <button class="example-btn" onclick="fillExample('What are the symptoms of hypertension?')">
            📋 Hypertension Info
        </button>
        <button class="example-btn" onclick="fillExample('Compare Ben\\'s glucose levels')">
            📊 Ben's Glucose Analysis
        </button>
    </div>
</div>

<!-- Demo Patients Info -->
<div class="info-box">
    <h3>📋 Available Demo Patients</h3>
    <p><strong>Ben Smith</strong> - 34M, Hypertension, Type 2 Diabetes</p>
    <p><strong>Sarah Jones</strong> - 28F, Asthma</p>
    <p><strong>Mike Wilson</strong> - 45M, High Cholesterol</p>
</div>
{% endblock %}